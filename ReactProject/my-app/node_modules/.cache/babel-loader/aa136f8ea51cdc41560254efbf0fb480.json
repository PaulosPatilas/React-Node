{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/pavlo/React-Node/ReactProject/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/pavlo/React-Node/ReactProject/my-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/pavlo/React-Node/ReactProject/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/pavlo/React-Node/ReactProject/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pavlo\\\\React-Node\\\\ReactProject\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import{Container,Form,FormGroup,Input,Label}from'reactstrap';import{Button}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLogged=_useState4[0],setLogged=_useState4[1];// var user = {\n//     username: \"\",\n//     password: \"\"\n// }\nfunction handleChange(event){console.log(event.target.name);console.log(event.target.value);setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},event.target.name,event.target.value)));}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(\"works\");_context.next=4;return fetch('/login',{mode:'cors',method:'POST',//credentials: 'include',\ncredentials:'include',headers:{'accept':'application/json','content-type':'application/json'},body:JSON.stringify(user)}).then(function(response){return response.json();}).then(function(data){console.log(data);setLogged(data.auth);localStorage.setItem('token',data.token);});case 4:console.log(\"User log in\");case 5:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:\"My first React-Node CRUD App\"}),/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\",font:14},children:\"Log In\"}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"username\",id:\"username\",value:user.username||'',onChange:function onChange(e){handleChange(e);},autoComplete:\"username\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",id:\"password\",value:user.password||'',onChange:function onChange(e){handleChange(e);},autoComplete:\"password\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",type:\"submit\",children:\"LogIn\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Not registered yet? \",/*#__PURE__*/_jsx(\"a\",{href:\"/registration\",children:\" Do It Now!\"})]}),isLogged&&/*#__PURE__*/_jsx(Button,{href:\"/home\",children:\"Check if Authenticated \"})]})]});}export default Login;","map":{"version":3,"sources":["C:/Users/pavlo/React-Node/reactproject/my-app/src/Login.js"],"names":["React","useEffect","useState","Container","Form","FormGroup","Input","Label","Button","Login","username","password","user","setUser","isLogged","setLogged","handleChange","event","console","log","target","name","value","handleSubmit","e","preventDefault","fetch","mode","method","credentials","headers","body","JSON","stringify","then","response","json","data","auth","localStorage","setItem","token","textAlign","font"],"mappings":"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","sourcesContent":["import React,{useEffect, useState} from 'react';\r\nimport {Container, Form, FormGroup, Input, Label} from 'reactstrap';\r\nimport {Button} from \"@mui/material\"\r\n\r\n\r\n\r\nfunction Login(){\r\n\r\n    const [user,setUser] = useState({\r\n        username: \"\",\r\n        password: \"\"\r\n    });\r\n\r\n    const [isLogged,setLogged] = useState(false)\r\n\r\n    \r\n    // var user = {\r\n    //     username: \"\",\r\n    //     password: \"\"\r\n    // }\r\n    \r\n    function handleChange(event)  {\r\n        console.log(event.target.name)\r\n        console.log(event.target.value)\r\n        setUser({...user, [event.target.name]:event.target.value})\r\n    }\r\n  \r\n    async function handleSubmit(e){\r\n        e.preventDefault();\r\n        console.log(\"works\")\r\n        await fetch('/login',\r\n            {\r\n            mode:'cors',\r\n            method: 'POST',\r\n            //credentials: 'include',\r\n            credentials:'include',\r\n            headers: { \r\n                'accept': 'application/json',\r\n                'content-type': 'application/json'\r\n            },\r\n            body:JSON.stringify(user)\r\n        })\r\n        .then((response)=>response.json())\r\n        .then((data)=>{\r\n            console.log(data)\r\n            setLogged(data.auth)   \r\n            localStorage.setItem('token', data.token)\r\n        })\r\n        console.log(\"User log in\")\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"App-header\">\r\n                My first React-Node CRUD App\r\n            </header>\r\n            <h1 style={{ textAlign: \"center\" , font:14}}>Log In</h1>\r\n            <Container> \r\n            <Form onSubmit={(e)=> handleSubmit(e)}>\r\n                <FormGroup>\r\n                    <Label for=\"username\">Username</Label>\r\n                    <Input type=\"text\" name=\"username\" id=\"username\" value={user.username || ''}\r\n                    onChange={(e) => {handleChange(e)}} autoComplete=\"username\"/>\r\n                </FormGroup>\r\n                <FormGroup>\r\n                    <Label for=\"password\">Password</Label>\r\n                    <Input type=\"password\" name=\"password\" id=\"password\" value={user.password || ''}\r\n                    onChange={(e) => {handleChange(e)}} autoComplete=\"password\"/>\r\n                </FormGroup>          \r\n                <Button variant='outlined' color=\"primary\" type=\"submit\">LogIn</Button>     \r\n            </Form>\r\n            <p>Not registered yet? <a href='/registration'> Do It Now!</a></p>\r\n\r\n            {isLogged && <Button href='/home'>Check if Authenticated </Button>}\r\n            </Container>         \r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Login "]},"metadata":{},"sourceType":"module"}