{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pavlo\\\\React-Node\\\\reactproject\\\\my-app\\\\src\\\\EmployeeTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from './GlobalStates.js';\nimport EmployeeRow from './EmployeeRow';\nimport EmpoyeeAddition from './EmployeeAddition';\nimport { Link } from 'react-router-dom';\nimport { ButtonGroup, Button, Table } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EmployeeTable() {\n  _s();\n\n  const [employees, setEmployees] = useState([]); // const [authState,setauthState] = useContext(AuthContext);\n  // isAuthenticated = async ()=>{\n  //   return await fetch(`<your domain>/isAuth`,{ \n  //   method:'GET'\n  //   })\n  //   .then(response=>response.json() )\n  //   .catch(err=>console.log(err))\n  //   };\n\n  useEffect(() => {\n    fetch('http://localhost:8080/employees', {\n      mode: 'cors',\n      headers: {\n        \"x-access-token\": localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      return response.json();\n    }).then(result => {\n      setEmployees(result); // isAuthenticated().then(data,error =>{\n      //   if(error){\n      //     throw error\n      //   }\n      //   else{\n      //     setauthState({...authState,id:result.id,\n      //       last_name:result.last_name,\n      //       first_name:result.first_name,\n      //       isActive:result.isActive,\n      //       date_of_birth:result.date_of_birth})  \n      //     }\n      //  })\n    });\n  }, []);\n\n  async function handleDeleteClick(id) {\n    console.log(id);\n    await fetch(`http://localhost:8080/employee/${id}`, {\n      mode: 'cors',\n      credentials: 'include',\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(() => {\n      //vriskw ola ta employees pou den exoun auto to id etsi kai na allaksw to state me ayta wste na diwksw to ena\n      let updatedEmployees = [...employees].filter(i => i.id !== id);\n      setEmployees(updatedEmployees);\n    });\n  }\n\n  const employeeList = employees.map(employee => {\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(EmployeeRow, {\n        edit: true,\n        id: employee.id,\n        LastName: employee.last_name,\n        FirstName: employee.first_name,\n        BirthDate: employee.date_of_birth.substring(0, 10),\n        is_active: employee.is_active\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          outline: true,\n          color: \"danger\",\n          onClick: () => handleDeleteClick(employee.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          outline: true,\n          color: \"secondary\",\n          tag: Link,\n          to: \"/employee/\" + employee.id,\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, employee.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: \"My first React-Node CRUD App\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        block: true,\n        outline: true,\n        color: \"primary\",\n        tag: Link,\n        to: \"/createEmployee\",\n        children: \"Add new Employee\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        bordered: true,\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Last Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"First Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Date of birth\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Active\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: employeeList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      block: true,\n      outline: true,\n      color: \"warning\",\n      onClick: () => {\n        localStorage.removeItem(\"token\");\n      },\n      tag: Link,\n      to: \"/\",\n      children: \"LogOut\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 7\n  }, this);\n}\n\n_s(EmployeeTable, \"3r6YD0p2Tk2YoB6mLnWOfE3/WTU=\");\n\n_c = EmployeeTable;\nexport default EmployeeTable; //   useEffect(() => {\n//     const fetchUsers = async () => {\n//         try {\n//             const response = await axios.get('http://localhost:8080/employees');\n//             setEmployees(response.data);\n//         } catch (e) {\n//             console.log(e);\n//         }\n//     };\n//     fetchUsers();\n//     console.log(employees);\n// }, []);\n\nvar _c;\n\n$RefreshReg$(_c, \"EmployeeTable\");","map":{"version":3,"sources":["C:/Users/pavlo/React-Node/reactproject/my-app/src/EmployeeTable.js"],"names":["React","useState","useEffect","useContext","AuthContext","EmployeeRow","EmpoyeeAddition","Link","ButtonGroup","Button","Table","EmployeeTable","employees","setEmployees","fetch","mode","headers","localStorage","getItem","then","response","json","result","handleDeleteClick","id","console","log","credentials","method","updatedEmployees","filter","i","employeeList","map","employee","last_name","first_name","date_of_birth","substring","is_active","removeItem"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useContext} from 'react'\r\nimport {AuthContext} from './GlobalStates.js';\r\nimport EmployeeRow from './EmployeeRow';\r\nimport EmpoyeeAddition from './EmployeeAddition';\r\nimport { Link } from 'react-router-dom';\r\nimport{ButtonGroup,Button,Table} from 'reactstrap';\r\n\r\n\r\nfunction EmployeeTable() {\r\n    \r\n  const [employees,setEmployees] = useState([]);\r\n // const [authState,setauthState] = useContext(AuthContext);\r\n\r\n  // isAuthenticated = async ()=>{\r\n  //   return await fetch(`<your domain>/isAuth`,{ \r\n  //   method:'GET'\r\n  //   })\r\n  //   .then(response=>response.json() )\r\n    \r\n  //   .catch(err=>console.log(err))\r\n    \r\n  //   };\r\n\r\n  useEffect(() => {    \r\n    fetch('http://localhost:8080/employees',\r\n    {\r\n      mode:'cors',\r\n      headers:{\r\n        \"x-access-token\": localStorage.getItem(\"token\")\r\n      }\r\n    })\r\n    .then(response => {\r\n      return response.json()\r\n    })\r\n    .then((result) => {\r\n      setEmployees(result);\r\n      // isAuthenticated().then(data,error =>{\r\n      //   if(error){\r\n      //     throw error\r\n      //   }\r\n      //   else{\r\n      //     setauthState({...authState,id:result.id,\r\n      //       last_name:result.last_name,\r\n      //       first_name:result.first_name,\r\n      //       isActive:result.isActive,\r\n      //       date_of_birth:result.date_of_birth})  \r\n      //     }\r\n      //  })\r\n      })  \r\n      },[]);\r\n         \r\n  async function handleDeleteClick(id){\r\n    console.log(id);\r\n    await fetch(`http://localhost:8080/employee/${id}`, {\r\n      mode:'cors',\r\n      credentials:'include',\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      }\r\n      }).then(() => {\r\n          //vriskw ola ta employees pou den exoun auto to id etsi kai na allaksw to state me ayta wste na diwksw to ena\r\n          let updatedEmployees = [...employees].filter(i => i.id !== id);\r\n          setEmployees(updatedEmployees);\r\n        });\r\n    }\r\n   \r\n\r\n\r\n    const employeeList = employees.map(employee => {\r\n      return (\r\n        <tr key={employee.id}>\r\n        <EmployeeRow edit={true} id={employee.id} LastName={employee.last_name} FirstName={employee.first_name} BirthDate={employee.date_of_birth.substring(0,10)} is_active={employee.is_active} />\r\n        <ButtonGroup>\r\n        <Button outline color='danger' onClick={()=> handleDeleteClick(employee.id)}>Delete</Button>\r\n        <Button outline color='secondary' tag={Link}  to={\"/employee/\" + employee.id}>Update</Button>      \r\n        </ButtonGroup>      \r\n        </tr>       \r\n    )});\r\n\r\n    return (\r\n      <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        My first React-Node CRUD App\r\n      </header>\r\n      <div className='container'>\r\n        <Button block outline color='primary' tag={Link} to = {\"/createEmployee\"}>Add new Employee</Button>\r\n        \r\n        <Table  bordered>\r\n        <thead>\r\n        <tr>\r\n          <th>Last Name</th>\r\n          <th>First Name</th>\r\n          <th>Date of birth</th>\r\n          <th>Active</th>\r\n          <th>Actions</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        {employeeList}    \r\n        </tbody>\r\n      </Table>\r\n      </div>\r\n      \r\n      <Button block outline color='warning' onClick={()=>{localStorage.removeItem(\"token\")}} tag={Link} to= {\"/\"}>LogOut</Button>\r\n      \r\n      </div>\r\n      )\r\n    \r\n}\r\n  export default EmployeeTable\r\n\r\n    //   useEffect(() => {\r\n    //     const fetchUsers = async () => {\r\n    //         try {\r\n                \r\n    //             const response = await axios.get('http://localhost:8080/employees');\r\n    //             setEmployees(response.data);\r\n                \r\n    //         } catch (e) {\r\n    //             console.log(e);\r\n                \r\n    //         }\r\n    //     };\r\n    //     fetchUsers();\r\n    //     console.log(employees);\r\n    // }, []);\r\n"]},"metadata":{},"sourceType":"module"}