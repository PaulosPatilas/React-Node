{"ast":null,"code":"import _toConsumableArray from\"C:/Users/pavlo/React-Node/ReactProject/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/pavlo/React-Node/ReactProject/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/pavlo/React-Node/ReactProject/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pavlo\\\\React-Node\\\\ReactProject\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect,useContext}from'react';import{AuthContext}from'./GlobalStates.js';import EmployeeRow from'./EmployeeRow';import EmpoyeeAddition from'./EmployeeAddition';import{Link}from'react-router-dom';import{ButtonGroup,Button,Table}from'reactstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EmployeeTable(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),employees=_useState2[0],setEmployees=_useState2[1];// const [authState,setauthState] = useContext(AuthContext);\n// isAuthenticated = async ()=>{\n//   return await fetch(`<your domain>/isAuth`,{ \n//   method:'GET'\n//   })\n//   .then(response=>response.json() )\n//   .catch(err=>console.log(err))\n//   };\nuseEffect(function(){fetch('/employees',{mode:'cors',headers:{\"x-access-token\":localStorage.getItem(\"token\")}}).then(function(response){return response.json();}).then(function(result){setEmployees(result);// isAuthenticated().then(data,error =>{\n//   if(error){\n//     throw error\n//   }\n//   else{\n//     setauthState({...authState,id:result.id,\n//       last_name:result.last_name,\n//       first_name:result.first_name,\n//       isActive:result.isActive,\n//       date_of_birth:result.date_of_birth})  \n//     }\n//  })\n});},[]);function handleDeleteClick(_x){return _handleDeleteClick.apply(this,arguments);}function _handleDeleteClick(){_handleDeleteClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(id);_context.next=3;return fetch(\"/employee/\".concat(id),{mode:'cors',credentials:'include',method:'DELETE',headers:{\"x-access-token\":localStorage.getItem(\"token\"),'Accept':'application/json','Content-Type':'application/json'}}).then(function(){//vriskw ola ta employees pou den exoun auto to id etsi kai na allaksw to state me ayta wste na diwksw to ena\nvar updatedEmployees=_toConsumableArray(employees).filter(function(i){return i.id!==id;});setEmployees(updatedEmployees);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _handleDeleteClick.apply(this,arguments);}var employeeList=employees.map(function(employee){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(EmployeeRow,{edit:true,id:employee.id,LastName:employee.last_name,FirstName:employee.first_name,BirthDate:employee.date_of_birth.substring(0,10),is_active:employee.is_active}),/*#__PURE__*/_jsxs(ButtonGroup,{children:[/*#__PURE__*/_jsx(Button,{outline:true,color:\"danger\",onClick:function onClick(){return handleDeleteClick(employee.id);},children:\"Delete\"}),/*#__PURE__*/_jsx(Button,{outline:true,color:\"secondary\",tag:Link,to:\"/employee/\"+employee.id,children:\"Update\"})]})]},employee.id);});return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:\"My first React-Node CRUD App\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Button,{block:true,outline:true,color:\"primary\",tag:Link,to:\"/createEmployee\",children:\"Add new Employee\"}),/*#__PURE__*/_jsxs(Table,{bordered:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date of birth\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Active\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:employeeList})]})]}),/*#__PURE__*/_jsx(Button,{block:true,outline:true,color:\"warning\",onClick:function onClick(){localStorage.removeItem(\"token\");},tag:Link,to:\"/\",children:\"LogOut\"})]});}export default EmployeeTable;//   useEffect(() => {\n//     const fetchUsers = async () => {\n//         try {\n//             const response = await axios.get('http://localhost:8080/employees');\n//             setEmployees(response.data);\n//         } catch (e) {\n//             console.log(e);\n//         }\n//     };\n//     fetchUsers();\n//     console.log(employees);\n// }, []);","map":{"version":3,"sources":["C:/Users/pavlo/React-Node/reactproject/my-app/src/EmployeeTable.js"],"names":["React","useState","useEffect","useContext","AuthContext","EmployeeRow","EmpoyeeAddition","Link","ButtonGroup","Button","Table","EmployeeTable","employees","setEmployees","fetch","mode","headers","localStorage","getItem","then","response","json","result","handleDeleteClick","id","console","log","credentials","method","updatedEmployees","filter","i","employeeList","map","employee","last_name","first_name","date_of_birth","substring","is_active","removeItem"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useContext} from 'react'\r\nimport {AuthContext} from './GlobalStates.js';\r\nimport EmployeeRow from './EmployeeRow';\r\nimport EmpoyeeAddition from './EmployeeAddition';\r\nimport { Link } from 'react-router-dom';\r\nimport{ButtonGroup,Button,Table} from 'reactstrap';\r\n\r\n\r\nfunction EmployeeTable() {\r\n    \r\n  const [employees,setEmployees] = useState([]);\r\n // const [authState,setauthState] = useContext(AuthContext);\r\n\r\n  // isAuthenticated = async ()=>{\r\n  //   return await fetch(`<your domain>/isAuth`,{ \r\n  //   method:'GET'\r\n  //   })\r\n\r\n  //   .then(response=>response.json() )\r\n    \r\n  //   .catch(err=>console.log(err))\r\n    \r\n  //   };\r\n\r\n  useEffect(() => {    \r\n    fetch('/employees',\r\n    {\r\n      mode:'cors',\r\n      headers:{\r\n        \"x-access-token\": localStorage.getItem(\"token\")\r\n      }\r\n    })\r\n    .then(response => {\r\n      return response.json()\r\n    })\r\n    .then((result) => {\r\n      setEmployees(result);\r\n      // isAuthenticated().then(data,error =>{\r\n      //   if(error){\r\n      //     throw error\r\n      //   }\r\n      //   else{\r\n      //     setauthState({...authState,id:result.id,\r\n      //       last_name:result.last_name,\r\n      //       first_name:result.first_name,\r\n      //       isActive:result.isActive,\r\n      //       date_of_birth:result.date_of_birth})  \r\n      //     }\r\n      //  })\r\n      })  \r\n      },[]);\r\n         \r\n  async function handleDeleteClick(id){\r\n    console.log(id);\r\n    await fetch(`/employee/${id}`, {\r\n      mode:'cors',\r\n      credentials:'include',\r\n      method: 'DELETE',\r\n      headers: {\r\n        \"x-access-token\": localStorage.getItem(\"token\"),\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      }\r\n      }).then(() => {\r\n          //vriskw ola ta employees pou den exoun auto to id etsi kai na allaksw to state me ayta wste na diwksw to ena\r\n          let updatedEmployees = [...employees].filter(i => i.id !== id);\r\n          setEmployees(updatedEmployees);\r\n        });\r\n    }\r\n   \r\n\r\n\r\n    const employeeList = employees.map(employee => {\r\n      return (\r\n        <tr key={employee.id}>\r\n        <EmployeeRow edit={true} id={employee.id} LastName={employee.last_name} FirstName={employee.first_name} BirthDate={employee.date_of_birth.substring(0,10)} is_active={employee.is_active} />\r\n        <ButtonGroup>\r\n        <Button outline color='danger' onClick={()=> handleDeleteClick(employee.id)}>Delete</Button>\r\n        <Button outline color='secondary' tag={Link}  to={\"/employee/\" + employee.id}>Update</Button>      \r\n        </ButtonGroup>      \r\n        </tr>       \r\n    )});\r\n\r\n    return (\r\n      <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        My first React-Node CRUD App\r\n      </header>\r\n      <div className='container'>\r\n        <Button block outline color='primary' tag={Link} to = {\"/createEmployee\"}>Add new Employee</Button>\r\n        \r\n        <Table  bordered>\r\n        <thead>\r\n        <tr>\r\n          <th>Last Name</th>\r\n          <th>First Name</th>\r\n          <th>Date of birth</th>\r\n          <th>Active</th>\r\n          <th>Actions</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        {employeeList}    \r\n        </tbody>\r\n      </Table>\r\n      </div>\r\n      \r\n      <Button block outline color='warning' onClick={()=>{localStorage.removeItem(\"token\")}} tag={Link} to= {\"/\"}>LogOut</Button>\r\n      \r\n      </div>\r\n      )\r\n    \r\n}\r\n  export default EmployeeTable\r\n\r\n    //   useEffect(() => {\r\n    //     const fetchUsers = async () => {\r\n    //         try {\r\n                \r\n    //             const response = await axios.get('http://localhost:8080/employees');\r\n    //             setEmployees(response.data);\r\n                \r\n    //         } catch (e) {\r\n    //             console.log(e);\r\n                \r\n    //         }\r\n    //     };\r\n    //     fetchUsers();\r\n    //     console.log(employees);\r\n    // }, []);\r\n"]},"metadata":{},"sourceType":"module"}